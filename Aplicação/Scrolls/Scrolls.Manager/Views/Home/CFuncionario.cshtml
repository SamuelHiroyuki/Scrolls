
@{
    ViewBag.Title = "Cadastro de funcionario";
}


<style>
    .fbg {
        border-color: #f2f2f2;
    }

    .btn-blue:hover {
        background-color: #005389;
        border-color: #005389;
    }

    .btn-blue:active:hover, .btn-blue.active:hover, .open > .dropdown-toggle.btn-blue:hover, .btn-blue:active:focus, .btn-blue.active:focus, .open > .dropdown-toggle.btn-blue:focus, .btn-blue:active.focus, .btn-blue.active.focus, .open > .dropdown-toggle.btn-blue.focus {
        background-color: #003d65;
        border-color: #003d65;
    }

    .btn-blue:focus, .btn-blue.focus {
        background-color: #005389;
        border-color: #005389;
    }

    .btn-gold:hover {
        background-color: #fbc404;
        border-color: #fbc404;
    }

    .btn-gold:active:hover, .btn-gold.active:hover, .open > .dropdown-toggle.btn-gold:hover, .btn-gold:active:focus, .btn-gold.active:focus, .open > .dropdown-toggle.btn-gold:focus, .btn-gold:active.focus, .btn-gold.active.focus, .open > .dropdown-toggle.btn-gold.focus {
        background-color: #b08903;
        border-color: #b08903;
    }


    .btn-gold:focus, .btn-gold.focus {
        background-color: #fbc404;
        border-color: #fbc404;
    }


    .btn-danger:hover {
        background-color: #a11c1c;
        border-color: #a11c1c;
    }

    .btn-danger:active:hover, .btn-danger.active:hover, .open > .dropdown-toggle.btn-danger:hover, .btn-danger:active:focus, .btn-danger.active:focus, .open > .dropdown-toggle.btn-danger:focus, .btn-danger:active.focus, .btn-danger.active.focus, .open > .dropdown-toggle.btn-danger.focus {
        background-color: #821717;
        border-color: #821717;
    }


    .btn-danger:focus, .btn-danger.focus {
        background-color: #a11c1c;
        border-color: #a11c1c;
    }
</style>

<div class="sidebar-menu" style="width: 40px;">

    <div class="sidebar-menu-inner" style="position: fixed !important;">
        <div class="row" style="padding-top: 160px; margin-left: -17px;">
            <div class="col-sm-12" style="padding-left: 0px;">
                <button type="button" class="btn btn-blue fbg inserttb" style="border-radius: 50%;  height: 52px; width: 52px; border-width: 5px;">
                    <i class="entypo-user-add"></i>
                </button>
            </div>
        </div>
        <div class="row" style="padding-top: 50px; padding-bottom: 50px;">
            <div class="col-sm-12" style="padding-left: 0px;">
                <button type="button" class="btn btn-gold fbg" onclick="lt(); $('#form1').each (function(){ this.reset(); });" style="border-radius: 50%;  height: 48px; border-width: 4px;">
                    <i class="entypo-trash"></i>
                </button>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12" style="padding-left: 0px;">
                <button type="button" class="btn btn-danger fbg" onclick="window.location.href='/Home/Index'" style="border-radius: 50%;  height: 48px; border-width: 4px;">
                    <i class="entypo-cancel-squared "></i>
                </button>
            </div>
        </div>
    </div>

</div>

<div class="main-content" style="background-color: #efebe9;">
    <div class="row">
        <div class="col-sm-12">
            <div class="well" style="background-color: #fff !important;">
                <form role="form" id="form1" method="post" action="/Home/Cadastro" enctype="multipart/form-data" class="validate">
                    <div class="row">
                        <div class="col-md-3" style="padding-right: 0px;">
                            <label class="form-label">Foto do funcionário</label>
                            <div class="form-group">
                                <div class="fileinput fileinput-new" data-provides="fileinput" style="display: inline-flex; margin-bottom: unset;">
                                    <div class="fileinput-new thumbnail" style="width: 220px; height: 250px;" data-trigger="fileinput">
                                        <img src="http://placehold.it/190x250">
                                    </div>


                                    <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 220px; max-height: 250px; min-width: 220px; min-height: 250px;"></div>
                                    <br />
                                    <div style="padding-left: 0px;">
                                        <span class="btn btn-white btn-file" style="align-items: center; width: 40px; height: 40px; display: flex;">
                                            <span class="fileinput-new" style="padding-right: 6px;">
                                                <i class="entypo-upload"></i>
                                            </span>
                                            <i class="entypo-ccw"></i>
                                            <input type="file" name="i1" accept=".jpg">
                                        </span>
                                        <br />
                                        <a href="#" class="btn btn-orange fileinput-exists" data-dismiss="fileinput" style="padding-top: 10px; width: 40px; height: 40px; margin-top: 152px;"><i class="entypo-trash"></i></a>
                                    </div>
                                </div>
                                <br />
                                <span id="mi" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                            </div>
                            <div class="form-group">
                                <label class="control-label" style="padding-left: 30px;">ADM:</label>
                                <div class="make-switch" data-text-label="<i class='entypo-user'></i>">
                                    <input type="checkbox" name="adm" id="adm" />
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4" style="padding-right: 0px;">
                            <br />
                            <br />
                            <div class="form-group">
                                <label class="control-label">Nome</label>
                                <input type="text" class="form-control" name="nome" id="nome" placeholder="Nome" />
                                <span id="mn" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                            </div>
                        </div>
                        <div class="col-sm-5">
                            <br />
                            <br />
                            <div class="form-group">
                                <label class="control-label">Sobrenome</label>

                                <input type="text" class="form-control" name="sobre" id="sobre" placeholder="Sobrenome" />
                                <span id="msn" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                            </div>
                        </div>

                        <div class="col-sm-9" style="padding-right: 0px; top: 5px;">
                            <br />
                            <div class="form-group">
                                <label class="control-label">Email</label>

                                <input type="text" class="form-control" name="email" id="email" data-validate="email" data-message-email="Digite um email válido!" placeholder="Email" />
                                <span id="me" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                                <span id="ee" hidden style="color: #cc2424;">Esse email já esta cadastrado!</span>
                            </div>
                        </div>

                        <dir class="col-sm-2" style="padding-right: 0px; top: 24px;">
                            <div class="form-group">
                                <label class="control-label">CPF</label>
                                <input type="text" class="form-control" name="cpf" id="cpf" data-mask="999.999.999-99" placeholder="CPF " />
                                <span id="mc" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                            </div>
                        </dir>

                        <div class="col-sm-3" style="padding-top: 12px; top: 24px;">
                            <div class="form-group">
                                <label class="control-label">Data de nascimento</label>
                                <div class="input-group">
                                    <input type="text" class="form-control datepicker" name="nasc" id="nas" data-format="dd/mm/yyyy">

                                    <div class="input-group-addon">
                                        <a href="#"><i class="entypo-calendar"></i></a>
                                    </div>

                                </div>

                                <span id="mna" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                            </div>
                        </div>

                        <div class="col-sm-2" style="padding-top: 12px; top: 24px;">
                            <div class="form-group">
                                <label for="rg" class="control-label">RG</label>
                                <input type="text" class="form-control" data-mask="99.999.999-9" id="rg" name="rg" placeholder="RG">
                                <span id="mr" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                            </div>
                        </div>

                        <div class="col-sm-2" style="padding-top: 12px; top: 24px;">
                            <div class="form-group">
                                <label for="pass" class="control-label">Senha</label>
                                <input type="text" class="form-control" id="pass" name="pass" placeholder="Senha">
                                <span id="ms" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <br />
                        <div class="col-sm-2">
                            <div class="form-group">
                                <label class="control-label">CEP <i id="veri" class='entypo-cancel-circled c-r' style="margin-left: 128px;" data-toggle="tooltip" data-placement="right" title="" data-original-title="CEP inválido."></i></label>
                                <input type="text" class="form-control" name="cep" id="cep" data-mask="99999-999" placeholder="CEP " />
                                <span id="mcep" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                            </div>
                        </div>
                        <style>
                            .c-r {
                                color: #cc2424;
                            }

                            .c-g {
                                color: #00a651;
                            }

                            .bc-r {
                                border-color: #cc2424;
                            }

                            .bc-g {
                                border-color: #00a651;
                            }
                        </style>
                        <script>
                            $(document).ready(function () {
                                $('#cep').change( function () {
                                    $.ajax({
                                        url: '@Url.Action("ConsultaCEP", "Home")',
                                        type: "GET",
                                        contentType: "application/json",
                                        data: { cep: $('#cep').val() },
                                        success: function (result) {
                                            $("#end").val(result[0]);
                                            $("#bai").val(result[1]);
                                            $("#cid").val(result[2]);
                                            $("#est").val(result[3]);
                                            if (result[4] == "CEP não encontrado.") {
                                                $('#cep').addClass('bc-r').removeClass('bc-g');
                                                $('#veri').addClass('entypo-cancel-circled').addClass('c-r').removeClass('entypo-plus-circled').removeClass('c-g');
                                                $('#veri').attr('data-original-title', "CEP inválido.");
                                            } else {
                                                $('#cep').removeClass('bc-r').addClass('bc-g');
                                                $('#veri').addClass('entypo-plus-circled').addClass('c-g').removeClass('entypo-cancel-circled').removeClass('c-r');
                                                $('#veri').attr('data-original-title', "CEP encontrado  .");
                                            }
                                        },
                                        error: function () {
                                            alert("Erro")
                                        }
                                    });
                                });
                            });
                        </script>

                        <div class="col-sm-1">
                            <div class="form-group">
                                <label class="control-label">Estado</label>
                                <input type="text" class="form-control" name="estado" readonly="readonly" id="est" value="Estado" />
                            </div>
                        </div>

                        <div class="col-sm-2">
                            <div class="form-group" id="aaaa">
                                <label class="control-label">Cidade</label>
                                <input type="text" class="form-control" name="cidade" readonly="readonly" id="cid" value="Cidade" />
                            </div>
                        </div>

                        <div class="col-sm-4">
                            <div class="form-group">
                                <label class="control-label">Bairro</label>
                                <input type="text" class="form-control" name="bairro" readonly="readonly" id="bai" value="Bairro" />
                            </div>
                        </div>

                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label">Complemento</label>
                                <input type="text" class="form-control" name="complemento" placeholder="Complemento" />
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-10">
                            <div class="form-group">
                                <label class="control-label">Logradouro</label>
                                <input type="text" class="form-control" name="logradouro" readonly="readonly" id="end" value="Logradouro" />
                            </div>
                        </div>

                        <div class="col-sm-2">
                            <div class="form-group">
                                <label class="control-label">Número da residência</label>
                                <input type="text" class="form-control" name="num" id="num" placeholder="Número" />
                                <span id="mnum" hidden style="color: #cc2424;">Esse campo é obrigatório!</span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<link rel="stylesheet" href="~/Assets/js/jvectormap/jquery-jvectormap-1.2.2.css">
<link rel="stylesheet" href="~/Assets/js/rickshaw/rickshaw.min.css">

<!-- Bottom scripts (common) -->
<script src="~/Assets/js/gsap/TweenMax.min.js"></script>
<script src="~/Assets/js/jquery-ui/js/jquery-ui-1.10.3.minimal.min.js"></script>
<script src="~/Assets/js/bootstrap.js"></script>
<script src="~/Assets/js/joinable.js"></script>
<script src="~/Assets/js/resizeable.js"></script>
<script src="~/Assets/js/neon-api.js"></script>
<script src="~/Assets/js/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="~/Assets/js/jvectormap/jquery-jvectormap-europe-merc-en.js"></script>
<script src="~/Assets/js/jquery.sparkline.min.js"></script>
<script src="~/Assets/js/rickshaw/vendor/d3.v3.js"></script>
<script src="~/Assets/js/rickshaw/rickshaw.min.js"></script>
<script src="~/Assets/js/raphael-min.js"></script>
<script src="~/Assets/js/morris.min.js"></script>
<script src="~/Assets/js/toastr.js"></script>
<script src="~/Assets/js/neon-chat.js"></script>
<script src="~/Assets/js/jquery.validate.min.js"></script>

<script src="~/Assets/js/bootstrap-datepicker.js"></script>

<script src="~/Assets/js/bootstrap-switch.min.js"></script>
<script src="~/Assets/js/jquery.inputmask.bundle.js"></script>
<script src="~/Assets/js/fileinput.js"></script>
<!-- JavaScripts initializations and stuff -->
<script src="~/Assets/js/neon-custom.js"></script>


<!-- Demo Settings -->
<script src="~/Assets/js/neon-demo.js"></script>


<script>

    function lt() {
        $('#nome').removeClass('bc-r');
        $('#sobre').removeClass('bc-r');
        $('#email').removeClass('bc-r');
        $('#nas').removeClass('bc-r');
        $('#num').removeClass('bc-r');


        $('#cep').removeClass('bc-r').removeClass('bc-g');

        $('#cpf').removeClass('bc-r');
        $('#rg').removeClass('bc-r');


        $('#mn').attr('hidden', true);
        $('#msn').attr('hidden', true);

        $('#me').attr('hidden', true);
        $('#mc').attr('hidden', true);
        $('#mna').attr('hidden', true);

        $('#mr').attr('hidden', true);
        $('#mcep').attr('hidden', true);
        $('#mnum').attr('hidden', true);

        $('#ee').attr('hidden', true);

        $('#veri').addClass('entypo-cancel-circled').addClass('c-r').removeClass('entypo-plus-circled').removeClass('bc-g');
        $('#veri').attr('data-original-title', "CEP inválido.");
    }

    $('.inserttb').on('click', mst)
    function mst() {
        var nome = $('#nome');
        var sobre = $('#sobre');
        var email = $('#email');
        var nas = $('#nas');
        var num = $('#num');
        var pass = $('#pass');


        var cep = $('#cep');

        var cpf = $('#cpf');
        var rg = $('#rg');

        if (pass.val().trim() == "") {
            pass.addClass('bc-r');
            $('#ms').attr('hidden', false);
        } else {
            pass.removeClass('bc-r');
            $('#ms').attr('hidden', true);
        }

        if (nome.val().trim() == "") {
            nome.addClass('bc-r');
            $('#mn').attr('hidden', false);
        } else {
            nome.removeClass('bc-r');
            $('#mn').attr('hidden', true);
        }

        if (sobre.val().trim() == "") {
            sobre.addClass('bc-r');
            $('#msn').attr('hidden', false);
        } else {
            sobre.removeClass('bc-r');
            $('#msn').attr('hidden', true);
        }

        if (email.val().trim() == "") {
            email.addClass('bc-r');
            $('#me').attr('hidden', false);
        } else {
            email.removeClass('bc-r');
            $('#me').attr('hidden', true);
        }

        if (nas.val().trim() == "") {
            nas.addClass('bc-r');
            $('#mna').attr('hidden', false);
        } else {
            nas.removeClass('bc-r');
            $('#mna').attr('hidden', true);
        }

        if (num.val().trim() == "") {
            num.addClass('bc-r');
            $('#mnum').attr('hidden', false);
        } else {
            num.removeClass('bc-r');
            $('#mnum').attr('hidden', true);
        }

        /*cep*/
        if ($('#cid').val() == "Cidade") {
            cep.addClass('bc-r').removeClass('bc-g');
            $('#mcep').attr('hidden', false);
        } else {
            cep.removeClass('bc-r').addClass('bc-g');
            $('#mcep').attr('hidden', true);
        }

        $.ajax({
                url: '@Url.Action("Verificar", "Home")',
                type: "GET",
                contentType: "application/json",
                data: { cpf: cpf.val(), rg: rg.val(), email: email.val(), na: nas.val() },
                success: function (cpfrg) {
                    if (cpfrg[0] == false) {
                        cpf.addClass('bc-r');
                        $('#mc').attr('hidden', false);
                    } else {
                        cpf.removeClass('bc-r');
                        $('#mc').attr('hidden', true);
                    }

                    if (cpfrg[1] == false) {
                        rg.addClass('bc-r');
                        $('#mr').attr('hidden', false);
                    } else {
                        rg.removeClass('bc-r');
                        $('#mr').attr('hidden', true);
                    }

                    if (cpfrg[2] == false) {
                        email.addClass('bc-r');
                        $('#ee').attr('hidden', false);
                        toastr.warning('O email já esta registrado!', 'Atenção!')
                    } else {
                        email.removeClass('bc-r');
                        $('#ee').attr('hidden', true);
                    }

                    if (cpfrg[3] == false) {
                        nas.addClass('bc-r');
                        toastr.warning('O contratado é menor de idade!', 'Atenção!')
                    } else {
                        nas.removeClass('bc-r');
                    }

                    if (nome.val().trim() == "" || pass.val().trim() == "" || sobre.val().trim() == "" || email.val().trim() == "" || cpfrg[2] == false || cpfrg[3] == false || nas.val().trim() == "" || num.val().trim() == "" || $('#cid').val() == "Cidade" || cpfrg[0] == false || cpfrg[1] == false) {
                        toastr.error('Preencha todos os campos corretamente para finalizar!', 'Atenção!')
                    } else {
                        $('#form1').each(function () { this.submit(); });
                    }
                }
        });

    }
</script>

@if (TempData["Sucesso"] != null)
{
    <script>
        $(document).ready(toastr.success('Funcionário cadastrado com sucesso!', 'Sucesso!'));
    </script>
}